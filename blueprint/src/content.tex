% In this file you should put the actual content of the blueprint.
% It will be used both by the web and the print version.
% It should *not* include the \begin{document}
%
% If you want to split the blueprint content into several files then
% the current file can be a simple sequence of \input. Otherwise It
% can start with a \section or \chapter for instance

\section{Normality and $\sigma$--Continuity for Positive Functionals}

In what follows, let $M$ be a (nonzero) $W^{*}$--algebra. Let $\mathcal{P}(M)$
denote the projection lattice of $M$. Let $\varphi$ be a positive linear functional $\varphi$ on $M$.
We say $\varphi$ is \textbf{normal} if whenever $(p_{\alpha})$ is an increasing net of projections in $M$ with supremum $p$,
we have $\varphi(p_{\alpha})\to \varphi(p)$. In this section we show that this property is equivalent to 
$\sigma(M, M_{*})$--continuity. We say that a linear functional $\varphi$ on $M$
is \textbf{positive} if $\varphi(x)\ge 0$ whenever $x\ge 0$.

\textit{To do : Net results must be replaced by filter versions.}

\subsection{$\sigma$--Continuous Implies Normal} 

This is 1.7.4 in Sakai.

\subsection{Normal Implies $\sigma$--Continuous}

\begin{lemma}
  \label{lem: selfadjoint_le_norm}
  For all self-adjoint $x\in M$, $\|x\|1-x \ge 0$.
\end{lemma}

\begin{lemma}
  \label{lem: proj_sub_of_subproj}
  For all $p,q\in \mathcal{P}(M)$ such that $q\le p$, $p-q\in \mathcal{P}(M)$.
\end{lemma}

\begin{lemma}
  \label{lem: proj_of_sup_proj}
  For every increasing bounded net $(p_{\alpha})$ of projections in $M$, the supremum $p$
  is a projection in $\mathcal{M}$
\end{lemma}

If $P:\mathcal{P}(M)\to \text{Prop}$ is a predicate, the usual ordering ``$\le$'' on projections
induces an order on the set $\{p\in \mathcal{P}(M)|P(p)\}$. In what follows there will be no confusion if 
we also denote this induced order by ``$\le$''.

The following lemma undoubtedly exists in Mathlib in more generality already.

\begin{lemma}
  \label{lem: uw_pos_sep_pts}
For every nonzero element $a\in M$, there is a $\sigma(M,M_{*})$--continuous positive linear
functional $\psi$ on $M$ such that $\psi(a)\ne 0$.
\end{lemma}

\begin{lemma}
  \label{lem: exists_uw_ge_normal}
  For every positive normal linear functional $\varphi$ and nonzero $p\in \mathcal{P}(M)$
  there exists a positive $\sigma(M,M_{*})$--continuous linear functional $\psi$ such that $\varphi(p)<\psi(p)$.
\end{lemma}


\begin{lemma}
  \label{lem: msr_th_lemma}
For all positive linear functionals $\varphi,\psi$ with
$\varphi$ normal and $\psi$ $\sigma(M,M_{*})$--continuous and every nonzero $p\in \mathcal{P}(M)$
such that $\varphi(p)<\psi(p)$, there exists a nonzero $p_1 \in \mathcal{P}(M)$ such that $p_1\le p$ and for all 
$q\in \mathcal{P}(M)$ with $q\le p_1$, we have $\varphi(q)<\phi(q)$. 
\end{lemma}

% Need a Zorn Lemma for the above. 

\begin{lemma}
  \label{lem: zorn_msr_th_lemma}
  For all $\varphi$ and $\psi$ positive linear functionals on $M$ with $\varphi$ normal and $\psi$ $\sigma(M,M_*)$--continuous, and nonzero $p\in \mathcal{P}(M)$
  such that $\varphi(p)<\psi(p)$ consider the predicate $P:\mathcal{P}(M)\to$ Proj defined, for $p_1\in \mathcal{P}(M)$, by 
  ``$p_1\le p$ and for all $q\in \mathcal{P}(M)$ with $q\le p_1$, we have $\varphi(q)<\phi(q)$''. If $(p_{\alpha})$ is a chain of projections in $M$ such that $P(p_{\alpha})$ is true for each $\alpha$,
  then $P(\sup(p_{\alpha}))$ is true. Hence by Zorn's Lemma there is a maximal $p'\in \mathcal{P}(M)$ such that $P(p')$ is true.  
\end{lemma}

Recall that a compact Hausdorff space is \textbf{Stonean} if the closure of every open set is open.

\begin{lemma}
  \label{lem: fin_lin_approx_of_stonean}
  Let $K$ be a Stonean space. Then every element $a$ in $C(K)$ can be uniformly approximated by 
  finite linear combinations of projections in $C(K)$. If $a\ge 0$ then the coefficients of the approximating 
  linear combinations may be chosen nonnegative.
\end{lemma}

\begin{lemma}
  \label{lem: cut_down_of_wstar} 
  If $p\in M$ is a projection, $pMp$ is also a $W^{*}$ algebra with identity $p$.
\end{lemma}

\begin{lemma}
  \label{lem: spec_masa_wstar_stonean}
  If $C$ is any maximal commutative $C^*$--subalgebra of the $W^{*}$--algebra $M$, its
  spectrum space (maximal ideal space) is Stonean.
\end{lemma}

\begin{lemma}
  \label{lem: zorn_base}
  Let $\varphi$ be a normal positive linear functional on $M$ and consider the predicate $P:\mathcal{P}(M)\to$ Proj defined, for $p\in \mathcal{P}(M)$, by 
  ``$M\ni x \mapsto \varphi(xp)$ is $\sigma(M,M_{*})$--continuous''. If $(p_{\alpha})$ is a chain of projections in $M$ such that $P(p_{\alpha})$ is true for each $\alpha$,
  then $P(\sup(p_{\alpha}))$ is true. Hence by Zorn's Lemma there is a maximal $p_0\in \mathcal{P}(M)$ such that $P(p_0)$ is true.  
\end{lemma}

\begin{lemma}
  \label{lem: wstar_of_masa}
  A maximal abelian $*$--subalgebra of a $W^{*}$--algebra $M$ is also a $W^{*}$--algebra.
\end{lemma}

\begin{theorem}
  \label{sigma_cts_of_normal}
  Every positive normal linear functional $\varphi$ on $M$ is $\sigma(M,M_{*})$--continuous.
\end{theorem}

\begin{proof}
  The claim is obvious for the zero functional. Let $\varphi$ be a nonzero positive normal linear functional. By Lemma \ref{lem: zorn_base} we have
  a maximal $p_0\in \mathcal{P}(M)$ such that $M\ni x \mapsto \varphi(xp_0)$ is $\sigma(M,M_{*})$--continuous. By Lemma \ref{lem: exists_uw_ge_normal}
  there is a $\sigma(M,M_{*})$--continuous positive functional $\psi$ on $M$ such that $\varphi(1-p_0)<\psi(1-p_0)$. By Lemma \ref{lem: msr_th_lemma}
  There is a nonzero subprojection $p\le 1-p_0$ in $M$ such that $\varphi(q)\lt \psi(q)$ for every $q\le p$ in $M$. By Lemma \ref{lem: zorn_msr_th_lemma}
  we may take $p$ to be maximal. Let $x\in pMp$. Then $x^{*}x$ is positive and hence normal, so the $C^{*}$--subalgebra of 
  $pMp$ generated by $x^{*}x$ and $p$ is commutative, and is hence contained in a maximal abelian $*$--subalgebra $A$ of $pMp$. Now $A$ is a $W^{*}$--
  subalgebra of $pMp$ and hence is a maximal commutative $C^{*}$--subalgebra of $pMp$. Via the Gelfand Transform, $A$ is star isomorphic to $C(K)$,
  where $K$ is Stonean by Lemma \ref{lem: cut_down_of_wstar}. By Lemma \ref{lem: fin_lin_approx_of_stonean} it follows that for every $a\ge 0$ in
  $A$, $\varphi(a)\le \psi(a)$, which holds a fortiori for $a\ge 0$ in $C^{*}(x^{*}x,p)$. In particular, $\varphi(px^{*}xp)\le \psi(px^{*}xp)$.
\end{proof}

\section{Continuous functional calculus}

\begin{definition}[Continuous functional calculus]
  \label{def:continuous_functional_calculus}
  \lean{ContinuousFunctionalCalculus}
  \mathlibok
  A $*$-$R$-algebra is said to have a continuous functional calculus for elements satisfying a predicate $p$ if,
  for each $a$ satisfying $p$, there is a $*$-homomorphism $\phi_a : C(\spectrum[R]{a}, R) \to A$ sending the identity function to $a$, and which is a closed embedding.
  Moreover, $\spectrum[R]{a}$ is compact and nonempty, and $\phi_a$ satisfies the spectral mapping property (i.e., $\spectrum[R]{\phi_a(f)} = f(\spectrum[R]{a})$).
\end{definition}

\begin{theorem}
  \label{thm:gelfand_cfc_iso}
  \lean{continuousFunctionalCalculus}
  \mathlibok
  For every normal element $a$ in a unital $C^*$-algebra $A$ there is a $*$-isomorphism between $C(\spectrum{a}, â„‚)$ and the $C^*$-subalgebra of $A$ generated by $a$.
\end{theorem}


